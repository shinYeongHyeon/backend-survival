# HTTP/1.1 와 HTTP/2 그리고 HTTP/3

## HTTP/1.1
HTTP 1.1 의 파이프라이닝은 하나의 connection 에서 한 번에 순차적인 여러 요청을 연속적으로 처리하고, 그 순서에 맞춰 응답을 받는 식으로 지연 시간을 줄였는데, 여기서 먼저 받은 요청이 끝나지 않으면 뒤 요청이 끝나도 먼저 온 요청이 끝날 때 까지 기다려야 하는 점이 있었다.  
이를 HOLB (Head Of Line Block) 문제라고 한다.  

따라서 HTTP 1.1 에서 요청 여러개를 동시에 처리하기 위해서는 클라이언트가 여러개의 커넥션을 이용해 가져오게 되는데, 이는 연결비용의 증가를 초래하였다.  

## HTTP/2
HTTP 2는 [바이너리 프레이밍 계층](#바이너리-프레이밍-계층) 을 사용해 요청과 응답의 멀티 플렉싱을 지원하는데, 여기서 멀티플렉싱이란 하나의 TCP 연결에서 여러 개의 데이터를 섞이지 않게 보내는 기법이다.  
이 각각의 데이터 흐름을 **stream** 이라고 한다.  

요청과 응답이 동시에 이루어지니 요러 요청과 응답이 뒤섞이는데, 이를 이용해 여러개의 연결 없이도 병렬처리가 가능해 HOLB 문제도 해결 된다.  
그러나 HOLB 가 완벽하게 해결 된 것은 아닌데, TCP 를 사용하면 TCP패킷이 네트워크 경로에서 손실되면 stream 에 공백이 생겨 그 다음에 오는 데이터 들도 제대로 전달되지 않아 지연이 생기게 된다.  

특히나, 여러개의 stream 을 하나의 TCP 커넥션으로 처리하니 더 크게 영향을 받게 된다.  

## HTTP/3
**TCP 가 아닌 UDP 를 사용한다.**  
정확히는 HTTP3 은 QUIC (Quick UDP Internet Connection) 라는 프로토콜 위에서 돌아가는 HTTP이다.  

**[QUIC 에 대해서는 여기서 자세히 확인이 가능하다](https://docs.google.com/document/d/1gY9-YNDNAB1eip-RTPbqphgySwSNSDHLq9D5Bty4FSU/edit?pli=1)**



---
###### 바이너리 프레이밍 계층
HTTP 메시지가 캡슐화돼 클라이언트와 서버 사이에 전송되는 방식을 규정하며, 헤더 프레임과 데이터 프레임으로 나눠서 처리하는데 이를 바이너리 프레이밍 계층이라 한다.  
_(HTTP 의 이해에서 Header 와 Body 라고 이해하면 된다.)_
